<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>카를로 아쿠티스 성상 축복식</title>
<meta name="color-scheme" content="light dark">
<meta name="theme-color" content="#0b0d12">
<style>
  :root{
    --bg:#0b0d12; --fg:#e9eef7; --muted:#9fb0c8;
    --brand:#5aa0ff; --brand2:#9f7bff;
    --glass:rgba(255,255,255,.08); --card:rgba(18,22,28,.50); --border:rgba(255,255,255,.18);
    --shadow:0 12px 36px rgba(0,0,0,.35);
    --radius:16px; --base:17px;
  }
  @media (prefers-color-scheme: light){
    :root{ --bg:#f4f6fb; --fg:#0f172a; --muted:#5b6780; --glass:rgba(255,255,255,.65); --card:rgba(255,255,255,.7); --border:rgba(0,0,0,.08); --shadow:0 16px 36px rgba(88,100,125,.15); }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font:400 var(--base)/1.7 system-ui,-apple-system,"Apple SD Gothic Neo","Noto Sans KR","Malgun Gothic","Segoe UI",Roboto,sans-serif;
    -webkit-text-size-adjust:100%; overflow-x:hidden;
  }

  /* ===== HERO (빈공간 없이 위에 붙임) ===== */
  .hero{
    position:relative;
    min-height:54svh;            /* 이전보다 낮춰서 스크롤 위쪽 빈 공간 제거 */
    display:flex; align-items:flex-end; /* 아래로 붙여 카드가 화면 상단에 더 가깝게 */
    padding:calc(env(safe-area-inset-top) + 10px) clamp(14px,4vw,24px) 12px;
    isolation:isolate;
    background:
      radial-gradient(1100px 480px at 80% -10%, rgba(90,160,255,.22), transparent),
      radial-gradient(900px 480px at 10% 120%, rgba(159,123,255,.20), transparent),
      #090b11;
  }
  .hero::before{
    content:""; position:absolute; inset:0;
    background:url('acutis-hero.jpg') center/cover no-repeat;
    filter:saturate(1.05) contrast(1.02) brightness(.9);
    opacity:.40; z-index:-2;
  }
  .hero::after{
    content:""; position:absolute; inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,.35) 0%, rgba(0,0,0,.15) 35%, rgba(0,0,0,.55) 100%);
    z-index:-1;
  }
  .hero-inner{
    width:min(100%,1000px);
    margin:0 auto;
    padding:18px clamp(14px,3.6vw,28px);
    background:var(--card);
    border:1px solid var(--border);
    backdrop-filter:saturate(1.15) blur(12px);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
  }
  .brandrow{display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin:0}
  .brandrow img{height:38px}
  h1{margin:.2rem 0 0; font-size:clamp(24px,4.6vw,38px)}

  /* ===== Tabs ===== */
  .tabs{margin:14px auto 0; width:min(100%,1000px); padding:0 clamp(14px,4vw,24px) 48px}
  .tabs input[type=radio]{display:none}
  .tab-labels{display:flex; gap:10px; flex-wrap:wrap}
  .tab-labels label{
    flex:1 0 auto; text-align:center; cursor:pointer; white-space:nowrap;
    padding:12px 16px; border-radius:999px; font-weight:800;
    background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.04));
    border:1px solid var(--border);
    box-shadow:0 6px 18px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.06);
    color:var(--fg);
  }
  #t1:checked ~ .tab-labels label[for=t1],
  #t2:checked ~ .tab-labels label[for=t2],
  #t3:checked ~ .tab-labels label[for=t3],
  #t4:checked ~ .tab-labels label[for=t4],
  #t5:checked ~ .tab-labels label[for=t5]{
    background:linear-gradient(135deg,var(--brand),var(--brand2)); color:#fff; border-color:transparent;
    box-shadow:0 10px 30px rgba(90,160,255,.35);
  }
  .panels{margin:12px 0 0}
  .panel{
    display:none; background:var(--glass); border:1px solid var(--border); border-radius:16px;
    box-shadow:0 12px 30px rgba(0,0,0,.2); backdrop-filter:saturate(1.1) blur(12px); padding:16px;
  }
  #t1:checked ~ .panels #p1,
  #t2:checked ~ .panels #p2,
  #t3:checked ~ .panels #p3,
  #t4:checked ~ .panels #p4,
  #t5:checked ~ .panels #p5{ display:block }

  h2{margin:.2rem 0 .6rem; font-size:clamp(20px,3.6vw,26px)}
  .lead{font-size:1.06em}
  .kv{display:grid; grid-template-columns:auto 1fr; gap:6px 12px}
  .kv dt{color:var(--muted)} .kv dd{margin:0; font-weight:700}
  .list{margin:.2rem 0 0; padding-left:22px}
  .list li{margin:.35rem 0}
  .muted{color:var(--muted)}
  .split{display:grid; gap:16px}
  @media (min-width:760px){ .split{ grid-template-columns:1.1fr .9fr } }
  .card{background:var(--glass); border:1px solid var(--border); border-radius:14px; padding:12px}

  /* ===== E-BOOK (PDF.js) ===== */
  .ebook-wrap{display:flex;flex-direction:column;gap:10px}
  .ebook-toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between}
  .ebook-left,.ebook-right{display:flex;gap:8px;align-items:center}
  .ebook-btn{appearance:none;border:1px solid var(--border);background:var(--glass);color:var(--fg);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .ebook-info{color:var(--muted);min-width:120px;text-align:center}
  .ebook-view{border:1px solid var(--border);border-radius:14px;background:#111;overflow:auto;max-height:80vh}
  #ebookCanvas{display:block;width:100%;height:auto}

  footer{width:min(100%,1000px); margin:22px auto; padding:0 clamp(14px,4vw,24px); color:var(--muted); font-size:.9em; text-align:center}
</style>
</head>
<body>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner">
      <div class="brandrow">
        <img src="logo.png" alt="cpbc 가톨릭평화방송·평화신문 로고" loading="eager">
        <h1>카를로 아쿠티스 성상 축복식</h1>
      </div>
    </div>
  </section>

  <!-- TABS -->
  <section class="tabs" aria-label="내용 탭">
    <input checked id="t1" name="tabs" type="radio">
    <input id="t2" name="tabs" type="radio">
    <input id="t3" name="tabs" type="radio">
    <input id="t4" name="tabs" type="radio">
    <input id="t5" name="tabs" type="radio">

    <div class="tab-labels" role="tablist">
      <label for="t1" role="tab" aria-controls="p1">행사 안내</label>
      <label for="t2" role="tab" aria-controls="p2">진행 순서</label>
      <label for="t3" role="tab" aria-controls="p3">전례문(응답)</label>
      <label for="t4" role="tab" aria-controls="p4">다큐 영상</label>
      <label for="t5" role="tab" aria-controls="p5">E-BOOK</label>
    </div>

    <div class="panels">
      <!-- 안내 -->
      <article id="p1" class="panel" role="tabpanel" aria-labelledby="t1">
        <div class="split">
          <div>
            <h2>제2주보성인 추대 및 성상 축복</h2>
            <p class="lead">가톨릭평화방송은 청소년 성인 <strong>카를로 아쿠티스</strong>를 본사의 <strong>제2주보성인</strong>으로 추대하고, 그 신심을 본받고자 성상을 세워 축복식을 거행합니다.</p>
            <dl class="kv">
              <dt>일시</dt><dd>2025년 9월 16일(화) 오전 11:00</dd>
              <dt>장소</dt><dd>cpbc 본사 주차장 (서울시 중구 삼일대로 330)</dd>
              <dt>집전</dt><dd>재단이사장 구요비 주교님 & cpbc 사제단</dd>
              <dt>참석</dt><dd>재단이사, 미래발전위원, 성상설립 후원인 등</dd>
            </dl>
          </div>
          <div class="card" style="border-radius:14px; overflow:hidden">
            <img src="acutis-hero.jpg" alt="카를로 아쿠티스/성상 사진" loading="lazy" style="width:100%;display:block;aspect-ratio:16/9;object-fit:cover;filter:saturate(1.05) contrast(1.02)">
          </div>
        </div>
      </article>

      <!-- 순서 -->
      <article id="p2" class="panel" role="tabpanel" aria-labelledby="t2">
        <h2>진행 순서(전례 형식)</h2>
        <ol class="list">
          <li><strong>입장 및 안내</strong> (해설자)</li>
          <li><strong>시작 예식</strong> (사제)
            <ul class="list">
              <li>성호경</li><li>인사</li><li>예식 취지 설명(권고)</li>
            </ul>
          </li>
          <li><strong>말씀 전례</strong>
            <ul class="list">
              <li>성경 봉독(예: 요한 6장)</li>
              <li>잠시 묵상 / (가능 시) 화답송</li>
            </ul>
          </li>
          <li><strong>강론 또는 짧은 권고</strong> (사제)</li>
          <li><strong>보편 지향 기도</strong> (◎ 응답)</li>
          <li><strong>성상 축복 예식</strong> (사제)
            <ul class="list"><li>축복 기도</li><li>성수 예식</li></ul>
          </li>
          <li><strong>(선택) 주님의 기도</strong></li>
          <li><strong>마침 예식</strong>
            <ul class="list"><li>마침 축복</li><li>파견 격려</li></ul>
          </li>
        </ol>
        <p class="muted">※ 미사 외 예식 형식이며, 실제 집전은 예식서와 주례 사제의 재량을 우선합니다.</p>
      </article>

      <!-- 전례문 -->
      <article id="p3" class="panel" role="tabpanel" aria-labelledby="t3">
        <h2>전례문 (◎ 응답 중심)</h2>
        <p class="lead">※ 사제 주례문은 「축복예식」 성상·성물 축복 본문을 따릅니다. 아래는 ◎ 응답 및 지향 예시입니다.</p>
        <hr>
        <p><strong> ╬</strong> 성부와 성자와 성령의 이름으로. <strong>◎</strong> 아멘.</p>
        <p><strong> ╬</strong> 우리 주 예수 그리스도의 은총과 하느님의 사랑과 성령의 친교가 여러분 모두와 함께 <strong>◎</strong> 또한 사제와 함께.</p>
        <hr>
        <h3>보편 지향 기도(예시)</h3>
        <ol class="list">
          <li>교황과 주교단, 모든 사제와 신자들에게 성령의 지혜를 주소서. <strong>◎</strong> 주님, 저희의 기도를 들어 주소서.</li>
          <li>청소년과 젊은이들이 성인 카를로 아쿠티스를 본받아 신앙을 용기 있게 살아가게 하소서. <strong>◎</strong> 주님, 저희의 기도를 들어 주소서.</li>
          <li>디지털 문화를 복음화의 도구로 삼아 많은 이들이 주님을 만나게 하소서. <strong>◎</strong> 주님, 저희의 기도를 들어 주소서.</li>
          <li>성상 설립에 동참한 후원자들과 이 자리에 함께한 모든 이들에게 건강과 평화를 주소서. <strong>◎</strong> 주님, 저희의 기도를 들어 주소서.</li>
        </ol>
        <hr>
        <p><strong> ╬</strong> 주님을 찬미합시다. <strong>◎</strong> 하느님, 감사합니다.</p>
      </article>

      <!-- 영상 -->
      <article id="p4" class="panel" role="tabpanel" aria-labelledby="t4">
        <h2>카를로 아쿠티스 다큐 영상</h2>
        <div class="video" aria-label="다큐 영상">
          <iframe
            src="https://www.youtube-nocookie.com/embed/y9Sol3Cw1ug"
            title="Carlo Acutis Documentary"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
            referrerpolicy="strict-origin-when-cross-origin"
            playsinline
            webkit-playsinline
            loading="lazy"></iframe>
        </div>
      </article>

      <!-- E-BOOK -->
      <article id="p5" class="panel" role="tabpanel" aria-labelledby="t5">
        <h2>E-BOOK: 카를로 아쿠티스</h2>

        <div class="ebook-wrap">
          <div class="ebook-toolbar">
            <div class="ebook-left">
              <button class="ebook-btn" id="prevBtn">◀ 이전</button>
              <button class="ebook-btn" id="nextBtn">다음 ▶</button>
              <div class="ebook-info"><span id="pageNum">1</span> / <span id="pageCount">–</span></div>
            </div>
            <div class="ebook-right">
              <button class="ebook-btn" id="fitBtn">폭 맞춤</button>
              <button class="ebook-btn" id="zoomOutBtn">－</button>
              <button class="ebook-btn" id="zoomInBtn">＋</button>
              <a class="ebook-btn" href="assets/book.pdf" target="_blank" rel="noreferrer">새 창에서 열기</a>
            </div>
          </div>

          <div class="ebook-view" id="ebookView">
            <canvas id="ebookCanvas" aria-label="E-BOOK 페이지"></canvas>
          </div>
          <p class="muted">※ 보기가 안 보이면 “새 창에서 열기”를 사용하세요. (일부 모바일 브라우저 제한)</p>
        </div>
      </article>
    </div>
  </section>

  <footer>© 2025 cpbc Catholic Peace Broadcasting Corporation</footer>

  <!-- PDF.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.5.136/pdf.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.5.136/pdf.worker.min.js";

    (function(){
      const url = "assets/book.pdf";
      const canvas = document.getElementById("ebookCanvas");
      const ctx = canvas.getContext("2d");
      const view = document.getElementById("ebookView");

      const pageNumEl = document.getElementById("pageNum");
      const pageCountEl = document.getElementById("pageCount");

      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const zoomInBtn = document.getElementById("zoomInBtn");
      const zoomOutBtn = document.getElementById("zoomOutBtn");
      const fitBtn = document.getElementById("fitBtn");

      let pdfDoc = null;
      let pageNum = 1;
      let scale = 1;
      let fitToWidth = true;
      let rendering = false, pending = null;

      function computeFitScale(page){
        const unscaled = page.getViewport({ scale: 1 });
        const padding = 24;
        const target = view.clientWidth - padding;
        return Math.max(0.2, target / unscaled.width);
      }

      function renderPage(num){
        rendering = true;
        pdfDoc.getPage(num).then(page => {
          const targetScale = fitToWidth ? computeFitScale(page) : scale;
          const viewport = page.getViewport({ scale: targetScale * window.devicePixelRatio });

          canvas.width = viewport.width;
          canvas.height = viewport.height;
          canvas.style.width = (viewport.width / window.devicePixelRatio) + "px";
          canvas.style.height = (viewport.height / window.devicePixelRatio) + "px";

          page.render({ canvasContext: ctx, viewport }).promise.then(()=>{
            rendering = false;
            pageNumEl.textContent = num;
            if (pending !== null){ renderPage(pending); pending = null; }
          });
        });
      }
      function queueRender(num){ if (rendering) pending = num; else renderPage(num); }
      function showPage(num){ if (num<1 || num>pdfDoc.numPages) return; pageNum = num; queueRender(num); }

      prevBtn.addEventListener("click", ()=> showPage(pageNum-1));
      nextBtn.addEventListener("click", ()=> showPage(pageNum+1));
      zoomInBtn.addEventListener("click", ()=>{ fitToWidth=false; scale=Math.min(5, scale*1.2); queueRender(pageNum); });
      zoomOutBtn.addEventListener("click", ()=>{ fitToWidth=false; scale=Math.max(0.2, scale/1.2); queueRender(pageNum); });
      fitBtn.addEventListener("click", ()=>{ fitToWidth=true; queueRender(pageNum); });
      window.addEventListener("resize", ()=>{ if (fitToWidth) queueRender(pageNum); });

      // 모바일 스와이프
      let startX=null;
      view.addEventListener("touchstart", e=>{ startX = e.changedTouches[0].clientX; }, {passive:true});
      view.addEventListener("touchend", e=>{
        if(startX===null) return;
        const dx = e.changedTouches[0].clientX - startX;
        if(Math.abs(dx)>50){ if(dx<0) showPage(pageNum+1); else showPage(pageNum-1); }
        startX=null;
      }, {passive:true});

      pdfjsLib.getDocument(url).promise.then(doc=>{
        pdfDoc = doc;
        pageCountEl.textContent = doc.numPages;
        showPage(1);
      }).catch(err=>{
        console.error(err);
        view.innerHTML = '<div style="padding:16px" class="muted">PDF를 불러오지 못했습니다. <a href="assets/book.pdf" target="_blank" rel="noreferrer">새 창에서 열기</a></div>';
      });
    })();
  </script>
</body>
</html>
